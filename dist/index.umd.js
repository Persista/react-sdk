(function(s,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react"),require("@persistajs/core")):typeof define=="function"&&define.amd?define(["exports","react","@persistajs/core"],e):(s=typeof globalThis<"u"?globalThis:s||self,e(s["@persista/react"]={},s.react,s["@persistajs/core"]))})(this,function(s,e,h){"use strict";const j="",I="",N=({isOpen:n,hasCloseBtn:m=!0,onClose:o,children:l,apiKey:f,actionId:b})=>{const[i,d]=e.useState(n),r=e.useRef(null),u=()=>{o&&o(),d(!1)},c=a=>{a.key==="Escape"&&u()};return e.useEffect(()=>{d(n)},[n]),e.useEffect(()=>{const a=r.current;a&&(i?a.showModal():a.close())},[i]),e.createElement("dialog",{ref:r,onKeyDown:c,style:{position:"relative",boxShadow:"hsl(0 0% 0% / 10%) 0 0 0.5rem 0.25rem",border:"2px solid black",borderRadius:"8px",padding:"12px"}},m&&e.createElement("button",{onClick:o,className:"exit-button"},"X"),l)},y=({isOpen:n,actionId:m,endTimeoutDuration:o=2e3,onClose:l=()=>{},apiKey:f,onPositiveResult:b=r=>{},onNegativeResult:i=r=>{},onResponse:d=r=>{}})=>{const[r,u]=e.useState(!0),[c,a]=e.useState(!1),[M,g]=e.useState(""),[x,p]=e.useState(""),[S,v]=e.useState(""),[L,E]=e.useState(!1);e.useEffect(()=>{n&&(u(!0),h.createChat(m,f).then(t=>{g(t.data.response),v(t.data.id),p(""),E(!1),u(!1)}))},[n]);const w=()=>{a(!0),h.getLLMResponse(S,x,f).then(t=>{if(a(!1),g(t.data.response),p(""),d&&d(t.data),t.data.status===1){E(!0),b(t.data),setTimeout(()=>{l()},o);return}if(t.data.status===-1){E(!0),i(t.data),setTimeout(()=>{l()},o);return}})};return e.createElement(N,{hasCloseBtn:!0,isOpen:n,onClose:l},r?e.createElement("div",{className:"loader-contaier"},e.createElement("span",{className:"loader"})):e.createElement("div",{className:"container"},e.createElement("h3",{className:"heading"}),e.createElement("p",{className:"prompt-query"},c?e.createElement("span",{className:"loader"}):M),!L&&e.createElement(e.Fragment,null,e.createElement("div",{className:"text-area-container"},e.createElement("textarea",{className:"prompt-answer",placeholder:"Some text...",value:x,onChange:t=>p(t.target.value)})),e.createElement("div",{className:"footer"},e.createElement("button",{className:"submit-button",disabled:c,onClick:w},"submit")))))};s.PersistaModal=y,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
